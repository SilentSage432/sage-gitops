apiVersion: cilium.io/v2
kind: CiliumNetworkPolicy
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"cilium.io/v2","kind":"CiliumNetworkPolicy","metadata":{"annotations":{},"name":"sigma-egress","namespace":"arc-sigma"},"spec":{"egress":[{"toEndpoints":[{"matchLabels":{"k8s:io.kubernetes.pod.namespace":"kube-system","k8s:k8s-app":"kube-dns"}},{"matchLabels":{"k8s:app.kubernetes.io/name":"coredns","k8s:io.kubernetes.pod.namespace":"kube-system"}},{"matchLabels":{"k8s:io.kubernetes.pod.namespace":"kube-system","k8s:k8s-app":"coredns"}}],"toPorts":[{"ports":[{"port":"53","protocol":"UDP"},{"port":"53","protocol":"TCP"}],"rules":{"dns":[{"matchPattern":"*"}]}}]},{"toCIDR":["10.96.0.10/32"],"toPorts":[{"ports":[{"port":"53","protocol":"UDP"},{"port":"53","protocol":"TCP"}]}]},{"toPorts":[{"ports":[{"port":"4222","protocol":"TCP"}]}],"toServices":[{"k8sService":{"namespace":"arc-chi","serviceName":"chi-bus"}}]},{"toCIDR":["10.111.237.23/32"],"toPorts":[{"ports":[{"port":"4222","protocol":"TCP"}]}]}],"endpointSelector":{"matchLabels":{"k8s:app":"sigma"}}}}
  creationTimestamp: "2025-10-31T20:02:36Z"
  generation: 1
  name: sigma-egress
  namespace: arc-sigma
  resourceVersion: "6359527"
  uid: dbe1f550-1f4b-4f62-af08-2c82b682b7be
spec:
  egress:
  - toEndpoints:
    - matchLabels:
        k8s:io.kubernetes.pod.namespace: kube-system
        k8s:k8s-app: kube-dns
    - matchLabels:
        k8s:app.kubernetes.io/name: coredns
        k8s:io.kubernetes.pod.namespace: kube-system
    - matchLabels:
        k8s:io.kubernetes.pod.namespace: kube-system
        k8s:k8s-app: coredns
    toPorts:
    - ports:
      - port: "53"
        protocol: UDP
      - port: "53"
        protocol: TCP
      rules:
        dns:
        - matchPattern: '*'
  - toCIDR:
    - 10.96.0.10/32
    toPorts:
    - ports:
      - port: "53"
        protocol: UDP
      - port: "53"
        protocol: TCP
  - toPorts:
    - ports:
      - port: "4222"
        protocol: TCP
    toServices:
    - k8sService:
        namespace: arc-chi
        serviceName: chi-bus
  - toCIDR:
    - 10.111.237.23/32
    toPorts:
    - ports:
      - port: "4222"
        protocol: TCP
  endpointSelector:
    matchLabels:
      k8s:app: sigma
status:
  conditions:
  - lastTransitionTime: "2025-10-31T20:02:36Z"
    message: Policy validation succeeded
    status: "True"
    type: Valid
